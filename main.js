!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.xgCompilerWeb=t(require("react"),require("react-dom")):e.xgCompilerWeb=t(e.react,e["react-dom"])}(this,(function(__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__4__){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){var o=n(5),r=n(6);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},function(e,t,n){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o,r;function i(e,t){return e&&"object"==typeof e&&e._type==t}function u(){let e="abcdefhijkmnprstwxyz",t=e.length,n="";for(let o=0;o<6;o++)n+=e.charAt(Math.floor(Math.random()*t));return"u_"+n}n.r(t),n.d(t,"T_Scope",(function(){})),n.d(t,"compile",(function(){return P})),n.d(t,"createIO",(function(){return A})),n.d(t,"E_ItemType",(function(){return o})),n.d(t,"isTypeof",(function(){return i})),n.d(t,"UNDEFINED_FRAME_LABEL",(function(){return c})),function(e){e[e.FRAME=0]="FRAME",e[e.NODE=1]="NODE",e[e.PIN=2]="PIN",e[e.JOINT=3]="JOINT",e[e.CONNECTION=4]="CONNECTION"}(o||(o={})),function(e){e.each=function(e,...t){t.forEach(t=>{t&&t.forEach(e)})},e.find=function(e,...t){let n;return t.find(t=>{if(t)return n=t.find(t=>e(t))}),n}}(r||(r={}));const c="UNDEFINED_FRAME_LABEL";function s(e){let t=e;t._exe||(t._exe=function(n,r,u,c){if(!w())return;const s=e.finishPin.forkedFrom||e.finishPin;if("function"!=typeof s._exe){const n=i(e.startPin.parent,o.NODE)?e.startPin.parent:void 0;throw new Error(`连接(来自:${n?n.runtime.title:"未知组件"}，${t.title})已断开.`)}O.debug&&O.debug.stepTime,s._exe(n,r,u,c)})}let f;function a(e,t){const n=function e(t,n,o,r){let i={id:u(),instId:n,hostId:o,path:void 0,parent:t,returnParams:{},resolve:null,comInsts:{},applyScope(t,n,o,r){const u=e(i,t,o,r);let c=i.comInsts[t];return c&&(!c.scopes&&(c.scopes=[]),c.scopes.push(u)),l(t,o,u),u}};if(r)i.path=i.id;else{const e=[i.id];let t=i.parent;for(;t;)t.parent&&e.push(t.id),t=t.parent;i.path=e.reverse().join(":")}return i}(void 0,e,t);return l(e,t,n),n}function p(e,t){var n;return null===(n=f[e])||void 0===n?void 0:n[t]}function l(e,t,n){let o=f[e];o||(f[e]=o={}),o[t]=n}function d(e,t,n="runtime"){e.conAry&&e.conAry.forEach(e=>{s(e)}),e._exe=function(r,u,c,s){if(!w())return;j.execute&&j.execute(o.PIN,e.id,u);let f=r;if(!f)if(i(e.parent,o.NODE)){const t=e.parent.parent;f=p(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}else if(i(e.parent,o.FRAME)){const t=e.parent;f=p(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}let a=t.pin?t.pin(e):void 0;if(a&&!1===a.exe(u,s))return;const l=t=>{a&&a.exe(t,e,"返回"),"function"==typeof c&&c(t)};if("input"==e.direction)e.proxyPin&&e.proxyPin._exe?e.proxyPin.parent._exe(f,{[e.hostId]:u},void 0,e.direction):e.parent._exe(f,void 0,{[e.hostId]:u},l);else if("inner-input"===e.direction){if(!e.proxyPin||!e.proxyPin._exe)return;e.proxyPin._exe(f.parent,u,l,s)}else if("output"==e.direction||"inner-output"==e.direction)if(e.proxyPin&&e.proxyPin._exe)e.proxyPin._exe(r.parent,u,l,s);else{let t;"mock"===n&&e.mockData&&(t=e.mockData),e.conAry&&e.conAry.length>0&&e.conAry.forEach((n,o)=>{let r;l&&(void 0!==t?l(JSON.parse(e.mockData)):r=function(e){l(e)}),n._exe(f,u,r,e)})}}}function _(e,t,n="runtime"){r.each(e=>d(e,t,n),e.inputPins,e.inputPinExts,e.inputPinsInModel),r.each(e=>d(e,t,n),e.outputPins,e.inputPinExts,e.outputPinsInModel);const o=e,i=t.node(e),u={};o._exe=function(t,n,o,s){let f;r.each(e=>{void 0!==e.dummyData&&(!f&&(f={}),f[e.hostId]=e.dummyData)},e.inputPins,e.inputPinsInModel),o=f?Object.assign(f,o):o,u[t.id]||(function(t,n=c){if("function"!=typeof i.render)throw new Error("Render config function for node not found.");const o=t.path,r={};e.frames&&e.frames.forEach(e=>{r[e.id]=function(n,o=c){const r=e._exe(t,n,o);if(r)return r.path}});const u={inst:i.render(o,n,r,t),scopes:[]};t.comInsts[e.runtime.id]=u}(t,n),u[t.id]=!0);const a=t.comInsts[e.runtime.id];if(o)for(let e in o){const t=o[e];a.inst.inputs[e]=[t,s]}i.exe&&i.exe(a.inst,o,s)},e.frames&&e.frames.forEach(e=>{m(e,t)})}let h=new WeakMap;function y(e,t,n="runtime"){const o=e.parent.parent.runtime;e.from?s(e.from):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e.to?s(e.to):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e._exe=function(n,o,r){const i=t.joint?t.joint(e):void 0,u=e.parent.parent;if("input"==e.type){let t=n.comInsts[u.runtime.id].scopes.find(t=>t.hostId===e.parent.id);const c=t=>{i&&i.exe(o),e.to&&e.to._exe(t,o,r,e.type)};if(t){let e=t.hostId;t.parent.comInsts[u.runtime.id].scopes.forEach(t=>{t.hostId==e&&c(t)})}else{let t=h.get(e);t||h.set(e,t=new WeakMap);let o=t.get(n);o||t.set(n,o=[]),o.push(c)}}else i&&"function"==typeof i.exe&&i.exe(o),e.to&&e.to._exe(n.parent,o,r,e.type)}}function m(e,t,n="runtime"){e.comAry&&e.comAry.forEach(e=>{_(e,t,n)}),e.inputPins&&e.inputPins.forEach(e=>d(e,t,n)),e.outputPins&&e.outputPins.forEach(e=>d(e,t,n)),e.inputJoints&&e.inputJoints.forEach(e=>y(e,t,n)),e.outputJoints&&e.outputJoints.forEach(e=>y(e,t,n));const o=e,r={};o._update=function(o,i,u=c){const s=u+o.id,{curScope:f,coms:a}=r[s];e.comAry.forEach(e=>{a.push(e.runtime.id),"function"!=typeof e._exe&&(_(e,t,n),e._exe(f,u,void 0,void 0))})},o._exe=function(i,u,s=c,f,l){if(!i){if(e.parent){const t=p(e.parent?e.parent.runtime.id:e.id,e.id);t&&(i=t.parent)}i||(i=a(void 0,e.id+"-parent"))}const d=s+i.id;let y=!1;if(r[d]){const t=r[d].coms;(t.length!==e.comAry.length||e.comAry.find(e=>t.indexOf(e.runtime.id)<0))&&(y=!0)}if(!r[d]||y){let u,a;if(o._exeAsRoot_=!!l,s=void 0!==s?s:c,o._exeAsRoot_)u={inst:void 0,scopes:[]};else if(u=i.comInsts[e.parent.runtime.id],!u&&e._rootF)return;const p=[];"input"==(f="string"==typeof f?f:"input")&&(a=i.applyScope(!o._exeAsRoot_&&e.parent?e.parent.runtime.id:void 0,s,e.id,e._rootF),e.comAry.forEach(e=>{p.push(e.runtime.id),"function"!=typeof e._exe&&_(e,t,n),e._exe(a,s,void 0,void 0)})),r[d]={myInstScope:u,curScope:a,coms:p}}const{curScope:m}=r[d];if("input"==(f="string"==typeof f?f:"input")){const t={};if("mock"===n&&e.inputPins.length>0&&e.inputPins.forEach(e=>{e.mockData&&(t[e.hostId]=e.mockData)}),u=Object.assign(t,u))for(let t in u){const n=e.inputPins.find(e=>e.hostId==t);n?n._exe(m,u[t],void 0,void 0):"undefined"!=typeof console&&"function"==typeof console.error&&console.error(`No inputPin(id=${t}) found`)}return e.inputJoints&&e.inputJoints.forEach(e=>{!function(e,t){let n=t.parent,o=h.get(e);if(o){let e=o.get(n);e&&e.forEach(e=>{e(t)})}}(e,m)}),m}if(f.match(/^(output)|(inner-input)$/gi)){let t=m;if(e.outputPins.length){if(u)for(let e in u)t.returnParams[e]=u[e]||null;e.outputPins.find(e=>null==t.returnParams[e.hostId])||t.resolve()}}}}let g,b,v,x=null,E="stop";function w(){return"running"===E}let O={},j={};function P(e,t,n="runtime"){return function(e,t){if(!i(e,t))throw new Error("Invalid item type")}(e,o.FRAME),m(e,t,n),x={on(e,t){e&&"string"==typeof e&&"function"==typeof t&&(j[e.toLowerCase()]=t)},run(t=e,n){if("stop"===E&&(f={}),function(e){return Object.assign(O,e||{}),b=[],v=[],!0}(n))return function(){function e(e){try{e.exe&&e.exe()}catch(e){j.error?j.error(e):console.error(e)}t(g)}function t(n){if("stop"==E||n!==g)return;let o;"pause"==E&&setTimeout(t,1e3),v.length>0?o=v.shift():b.length>0&&(o=b.shift()),o?O.debug?setTimeout(()=>{e(o)},o.debugSleep):"number"==typeof o.sleep&&o.sleep>-1?setTimeout(()=>{e(o)},0):e(o):setTimeout(e=>t(n))}E="running",g=u(),t(g),new Promise((e,t)=>{})}(),e=>t._exe(void 0,e,void 0,"input",!0)},update:(t,n=e)=>(n._update(t,void 0,void 0),!0),pause:I,stop(){const e=(E="stop",!0);return x=null,b=void 0,v=void 0,f={},e}}}function I(){return E="pause",!0}function A(e,t){const n={_all:{},_waiting:{},set(e,t){this._all[e]=t;const n=this._waiting[e];if(n)try{n.forEach(e=>{t(e)}),delete this._waiting[e]}finally{}return!0},get(e){return this._all[e]},waiting(e,t){let n=this._waiting[e];n||(n=this._waiting[e]=[]),n.push(t)}},o=u(),i={};return{inputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.inputPins,e.inputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t,r)=>"__id__"===t?o:function(e){n.set(t,(function(n){const o=i[t];if(void 0!==n&&o){i[t]=void 0;const[o,r]=n;e(o,(function(e){"function"==typeof r&&r(e)}))}}))},set(e,o,r,u){i[o]=r;const c=n.get(o);return c?((null==t?void 0:t.input)&&t.input(),c(r)):n.waiting(o,r),!0}}),outputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.outputPins,e.outputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,i,u){if("__id__"===i)return o;let c;return function(n,o){if(e.outputPins){c=o;const u=function(e){"function"==typeof c&&c(e)},s=r.find(({hostId:e})=>i==e,e.outputPins,e.outputPinsInModel);if(!s)throw new Error(`No output(hostId=${i}) found.`);Promise.resolve().then(()=>{(null==t?void 0:t.output)&&t.output(n),s._exe(null,n,u,e)})}}}})}}}])},function(e,t,n){"use strict";var o,r;function i(e,t){return e&&"object"==typeof e&&e._type==t}function u(){let e="abcdefhijkmnprstwxyz",t=e.length,n="";for(let o=0;o<6;o++)n+=e.charAt(Math.floor(Math.random()*t));return"u_"+n}n.r(t),n.d(t,"T_Scope",(function(){})),n.d(t,"compile",(function(){return I})),n.d(t,"createIO",(function(){return M})),n.d(t,"E_ItemType",(function(){return o})),n.d(t,"isTypeof",(function(){return i})),n.d(t,"UNDEFINED_FRAME_LABEL",(function(){return c})),function(e){e[e.FRAME=0]="FRAME",e[e.NODE=1]="NODE",e[e.PIN=2]="PIN",e[e.JOINT=3]="JOINT",e[e.CONNECTION=4]="CONNECTION"}(o||(o={})),function(e){e.each=function(e,...t){t.forEach(t=>{t&&t.forEach(e)})},e.find=function(e,...t){let n;return t.find(t=>{if(t)return n=t.find(t=>e(t))}),n}}(r||(r={}));const c="UNDEFINED_FRAME_LABEL";var s=n(0);function f(e){let t=e;t._exe||(t._exe=function(n,r,i,u){if(!O())return;const c=e.finishPin.forkedFrom||e.finishPin;if("function"!=typeof c._exe){const n=Object(s.isTypeof)(e.startPin.parent,o.NODE)?e.startPin.parent:void 0;throw new Error(`连接(来自:${n?n.runtime.title:"未知组件"}，${t.title})已断开.`)}j.debug&&j.debug.stepTime,c._exe(n,r,i,u)})}let a;function p(e,t){const n=function e(t,n,o,r){let i={id:u(),instId:n,hostId:o,path:void 0,parent:t,returnParams:{},resolve:null,comInsts:{},applyScope(t,n,o,r){const u=e(i,t,o,r);let c=i.comInsts[t];return c&&(!c.scopes&&(c.scopes=[]),c.scopes.push(u)),d(t,o,u),u}};if(r)i.path=i.id;else{const e=[i.id];let t=i.parent;for(;t;)t.parent&&e.push(t.id),t=t.parent;i.path=e.reverse().join(":")}return i}(void 0,e,t);return d(e,t,n),n}function l(e,t){var n;return null===(n=a[e])||void 0===n?void 0:n[t]}function d(e,t,n){let o=a[e];o||(a[e]=o={}),o[t]=n}function _(e,t,n="runtime"){e.conAry&&e.conAry.forEach(e=>{f(e)}),e._exe=function(r,u,c,s){if(!O())return;P.execute&&P.execute(o.PIN,e.id,u);let f=r;if(!f)if(i(e.parent,o.NODE)){const t=e.parent.parent;f=l(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}else if(i(e.parent,o.FRAME)){const t=e.parent;f=l(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}let a=t.pin?t.pin(e):void 0;if(a&&!1===a.exe(u,s))return;const p=t=>{a&&a.exe(t,e,"返回"),"function"==typeof c&&c(t)};if("input"==e.direction)e.proxyPin&&e.proxyPin._exe?e.proxyPin.parent._exe(f,{[e.hostId]:u},void 0,e.direction):e.parent._exe(f,void 0,{[e.hostId]:u},p);else if("inner-input"===e.direction){if(!e.proxyPin||!e.proxyPin._exe)return;e.proxyPin._exe(f.parent,u,p,s)}else if("output"==e.direction||"inner-output"==e.direction)if(e.proxyPin&&e.proxyPin._exe)e.proxyPin._exe(r.parent,u,p,s);else{let t;"mock"===n&&e.mockData&&(t=e.mockData),e.conAry&&e.conAry.length>0&&e.conAry.forEach((n,o)=>{let r;p&&(void 0!==t?p(JSON.parse(e.mockData)):r=function(e){p(e)}),n._exe(f,u,r,e)})}}}function h(e,t,n="runtime"){r.each(e=>_(e,t,n),e.inputPins,e.inputPinExts,e.inputPinsInModel),r.each(e=>_(e,t,n),e.outputPins,e.inputPinExts,e.outputPinsInModel);const o=e,i=t.node(e),u={};o._exe=function(t,n,o,s){let f;r.each(e=>{void 0!==e.dummyData&&(!f&&(f={}),f[e.hostId]=e.dummyData)},e.inputPins,e.inputPinsInModel),o=f?Object.assign(f,o):o,u[t.id]||(function(t,n=c){if("function"!=typeof i.render)throw new Error("Render config function for node not found.");const o=t.path,r={};e.frames&&e.frames.forEach(e=>{r[e.id]=function(n,o=c){const r=e._exe(t,n,o);if(r)return r.path}});const u={inst:i.render(o,n,r,t),scopes:[]};t.comInsts[e.runtime.id]=u}(t,n),u[t.id]=!0);const a=t.comInsts[e.runtime.id];if(o)for(let e in o){const t=o[e];a.inst.inputs[e]=[t,s]}i.exe&&i.exe(a.inst,o,s)},e.frames&&e.frames.forEach(e=>{g(e,t)})}let y=new WeakMap;function m(e,t,n="runtime"){const o=e.parent.parent.runtime;e.from?f(e.from):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e.to?f(e.to):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e._exe=function(n,o,r){const i=t.joint?t.joint(e):void 0,u=e.parent.parent;if("input"==e.type){let t=n.comInsts[u.runtime.id].scopes.find(t=>t.hostId===e.parent.id);const c=t=>{i&&i.exe(o),e.to&&e.to._exe(t,o,r,e.type)};if(t){let e=t.hostId;t.parent.comInsts[u.runtime.id].scopes.forEach(t=>{t.hostId==e&&c(t)})}else{let t=y.get(e);t||y.set(e,t=new WeakMap);let o=t.get(n);o||t.set(n,o=[]),o.push(c)}}else i&&"function"==typeof i.exe&&i.exe(o),e.to&&e.to._exe(n.parent,o,r,e.type)}}function g(e,t,n="runtime"){e.comAry&&e.comAry.forEach(e=>{h(e,t,n)}),e.inputPins&&e.inputPins.forEach(e=>_(e,t,n)),e.outputPins&&e.outputPins.forEach(e=>_(e,t,n)),e.inputJoints&&e.inputJoints.forEach(e=>m(e,t,n)),e.outputJoints&&e.outputJoints.forEach(e=>m(e,t,n));const o=e,r={};o._update=function(o,i,u=c){const s=u+o.id,{curScope:f,coms:a}=r[s];e.comAry.forEach(e=>{a.push(e.runtime.id),"function"!=typeof e._exe&&(h(e,t,n),e._exe(f,u,void 0,void 0))})},o._exe=function(i,u,s=c,f,a){if(!i){if(e.parent){const t=l(e.parent?e.parent.runtime.id:e.id,e.id);t&&(i=t.parent)}i||(i=p(void 0,e.id+"-parent"))}const d=s+i.id;let _=!1;if(r[d]){const t=r[d].coms;(t.length!==e.comAry.length||e.comAry.find(e=>t.indexOf(e.runtime.id)<0))&&(_=!0)}if(!r[d]||_){let u,p;if(o._exeAsRoot_=!!a,s=void 0!==s?s:c,o._exeAsRoot_)u={inst:void 0,scopes:[]};else if(u=i.comInsts[e.parent.runtime.id],!u&&e._rootF)return;const l=[];"input"==(f="string"==typeof f?f:"input")&&(p=i.applyScope(!o._exeAsRoot_&&e.parent?e.parent.runtime.id:void 0,s,e.id,e._rootF),e.comAry.forEach(e=>{l.push(e.runtime.id),"function"!=typeof e._exe&&h(e,t,n),e._exe(p,s,void 0,void 0)})),r[d]={myInstScope:u,curScope:p,coms:l}}const{curScope:m}=r[d];if("input"==(f="string"==typeof f?f:"input")){const t={};if("mock"===n&&e.inputPins.length>0&&e.inputPins.forEach(e=>{e.mockData&&(t[e.hostId]=e.mockData)}),u=Object.assign(t,u))for(let t in u){const n=e.inputPins.find(e=>e.hostId==t);n?n._exe(m,u[t],void 0,void 0):"undefined"!=typeof console&&"function"==typeof console.error&&console.error(`No inputPin(id=${t}) found`)}return e.inputJoints&&e.inputJoints.forEach(e=>{!function(e,t){let n=t.parent,o=y.get(e);if(o){let e=o.get(n);e&&e.forEach(e=>{e(t)})}}(e,m)}),m}if(f.match(/^(output)|(inner-input)$/gi)){let t=m;if(e.outputPins.length){if(u)for(let e in u)t.returnParams[e]=u[e]||null;e.outputPins.find(e=>null==t.returnParams[e.hostId])||t.resolve()}}}}let b,v,x,E=null,w="stop";function O(){return"running"===w}let j={},P={};function I(e,t,n="runtime"){return function(e,t){if(!i(e,t))throw new Error("Invalid item type")}(e,o.FRAME),g(e,t,n),E={on(e,t){e&&"string"==typeof e&&"function"==typeof t&&(P[e.toLowerCase()]=t)},run(t=e,n){if("stop"===w&&(a={}),function(e){return Object.assign(j,e||{}),v=[],x=[],!0}(n))return function(){function e(e){try{e.exe&&e.exe()}catch(e){P.error?P.error(e):console.error(e)}t(b)}function t(n){if("stop"==w||n!==b)return;let o;"pause"==w&&setTimeout(t,1e3),x.length>0?o=x.shift():v.length>0&&(o=v.shift()),o?j.debug?setTimeout(()=>{e(o)},o.debugSleep):"number"==typeof o.sleep&&o.sleep>-1?setTimeout(()=>{e(o)},0):e(o):setTimeout(e=>t(n))}w="running",b=u(),t(b),new Promise((e,t)=>{})}(),e=>t._exe(void 0,e,void 0,"input",!0)},update:(t,n=e)=>(n._update(t,void 0,void 0),!0),pause:A,stop(){const e=(w="stop",!0);return E=null,v=void 0,x=void 0,a={},e}}}function A(){return w="pause",!0}function M(e,t){const n={_all:{},_waiting:{},set(e,t){this._all[e]=t;const n=this._waiting[e];if(n)try{n.forEach(e=>{t(e)}),delete this._waiting[e]}finally{}return!0},get(e){return this._all[e]},waiting(e,t){let n=this._waiting[e];n||(n=this._waiting[e]=[]),n.push(t)}},o=u(),i={};return{inputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.inputPins,e.inputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t,r)=>"__id__"===t?o:function(e){n.set(t,(function(n){const o=i[t];if(void 0!==n&&o){i[t]=void 0;const[o,r]=n;e(o,(function(e){"function"==typeof r&&r(e)}))}}))},set(e,o,r,u){i[o]=r;const c=n.get(o);return c?((null==t?void 0:t.input)&&t.input(),c(r)):n.waiting(o,r),!0}}),outputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.outputPins,e.outputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,i,u){if("__id__"===i)return o;let c;return function(n,o){if(e.outputPins){c=o;const u=function(e){"function"==typeof c&&c(e)},s=r.find(({hostId:e})=>i==e,e.outputPins,e.outputPinsInModel);if(!s)throw new Error(`No output(hostId=${i}) found.`);Promise.resolve().then(()=>{(null==t?void 0:t.output)&&t.output(n),s._exe(null,n,u,e)})}}}})}}}])},function(e,t,n){"use strict";var o,r;function i(e,t){return e&&"object"==typeof e&&e._type==t}function u(){let e="abcdefhijkmnprstwxyz",t=e.length,n="";for(let o=0;o<6;o++)n+=e.charAt(Math.floor(Math.random()*t));return"u_"+n}n.r(t),n.d(t,"T_Scope",(function(){})),n.d(t,"compile",(function(){return I})),n.d(t,"createIO",(function(){return M})),n.d(t,"E_ItemType",(function(){return o})),n.d(t,"isTypeof",(function(){return i})),n.d(t,"UNDEFINED_FRAME_LABEL",(function(){return c})),function(e){e[e.FRAME=0]="FRAME",e[e.NODE=1]="NODE",e[e.PIN=2]="PIN",e[e.JOINT=3]="JOINT",e[e.CONNECTION=4]="CONNECTION"}(o||(o={})),function(e){e.each=function(e,...t){t.forEach(t=>{t&&t.forEach(e)})},e.find=function(e,...t){let n;return t.find(t=>{if(t)return n=t.find(t=>e(t))}),n}}(r||(r={}));const c="UNDEFINED_FRAME_LABEL";var s=n(0);function f(e){let t=e;t._exe||(t._exe=function(n,r,i,u){if(!O())return;const c=e.finishPin.forkedFrom||e.finishPin;if("function"!=typeof c._exe){const n=Object(s.isTypeof)(e.startPin.parent,o.NODE)?e.startPin.parent:void 0;throw new Error(`连接(来自:${n?n.runtime.title:"未知组件"}，${t.title})已断开.`)}j.debug&&j.debug.stepTime,c._exe(n,r,i,u)})}let a;function p(e,t){const n=function e(t,n,o,r){let i={id:u(),instId:n,hostId:o,path:void 0,parent:t,returnParams:{},resolve:null,comInsts:{},applyScope(t,n,o,r){const u=e(i,t,o,r);let c=i.comInsts[t];return c&&(!c.scopes&&(c.scopes=[]),c.scopes.push(u)),d(t,o,u),u}};if(r)i.path=i.id;else{const e=[i.id];let t=i.parent;for(;t;)t.parent&&e.push(t.id),t=t.parent;i.path=e.reverse().join(":")}return i}(void 0,e,t);return d(e,t,n),n}function l(e,t){var n;return null===(n=a[e])||void 0===n?void 0:n[t]}function d(e,t,n){let o=a[e];o||(a[e]=o={}),o[t]=n}function _(e,t,n="runtime"){e.conAry&&e.conAry.forEach(e=>{f(e)}),e._exe=function(r,u,c,s){if(!O())return;P.execute&&P.execute(o.PIN,e.id,u);let f=r;if(!f)if(i(e.parent,o.NODE)){const t=e.parent.parent;f=l(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}else if(i(e.parent,o.FRAME)){const t=e.parent;f=l(!t._exeAsRoot_&&t.parent?t.parent.runtime.id:void 0,t.id)}let a=t.pin?t.pin(e):void 0;if(a&&!1===a.exe(u,s))return;const p=t=>{a&&a.exe(t,e,"返回"),"function"==typeof c&&c(t)};if("input"==e.direction)e.proxyPin&&e.proxyPin._exe?e.proxyPin.parent._exe(f,{[e.hostId]:u},void 0,e.direction):e.parent._exe(f,void 0,{[e.hostId]:u},p);else if("inner-input"===e.direction){if(!e.proxyPin||!e.proxyPin._exe)return;e.proxyPin._exe(f.parent,u,p,s)}else if("output"==e.direction||"inner-output"==e.direction)if(e.proxyPin&&e.proxyPin._exe)e.proxyPin._exe(r.parent,u,p,s);else{let t;"mock"===n&&e.mockData&&(t=e.mockData),e.conAry&&e.conAry.length>0&&e.conAry.forEach((n,o)=>{let r;p&&(void 0!==t?p(JSON.parse(e.mockData)):r=function(e){p(e)}),n._exe(f,u,r,e)})}}}function h(e,t,n="runtime"){r.each(e=>_(e,t,n),e.inputPins,e.inputPinExts,e.inputPinsInModel),r.each(e=>_(e,t,n),e.outputPins,e.inputPinExts,e.outputPinsInModel);const o=e,i=t.node(e),u={};o._exe=function(t,n,o,s){let f;r.each(e=>{void 0!==e.dummyData&&(!f&&(f={}),f[e.hostId]=e.dummyData)},e.inputPins,e.inputPinsInModel),o=f?Object.assign(f,o):o,u[t.id]||(function(t,n=c){if("function"!=typeof i.render)throw new Error("Render config function for node not found.");const o=t.path,r={};e.frames&&e.frames.forEach(e=>{r[e.id]=function(n,o=c){const r=e._exe(t,n,o);if(r)return r.path}});const u={inst:i.render(o,n,r,t),scopes:[]};t.comInsts[e.runtime.id]=u}(t,n),u[t.id]=!0);const a=t.comInsts[e.runtime.id];if(o)for(let e in o){const t=o[e];a.inst.inputs[e]=[t,s]}i.exe&&i.exe(a.inst,o,s)},e.frames&&e.frames.forEach(e=>{g(e,t)})}let y=new WeakMap;function m(e,t,n="runtime"){const o=e.parent.parent.runtime;e.from?f(e.from):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e.to?f(e.to):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e._exe=function(n,o,r){const i=t.joint?t.joint(e):void 0,u=e.parent.parent;if("input"==e.type){let t=n.comInsts[u.runtime.id].scopes.find(t=>t.hostId===e.parent.id);const c=t=>{i&&i.exe(o),e.to&&e.to._exe(t,o,r,e.type)};if(t){let e=t.hostId;t.parent.comInsts[u.runtime.id].scopes.forEach(t=>{t.hostId==e&&c(t)})}else{let t=y.get(e);t||y.set(e,t=new WeakMap);let o=t.get(n);o||t.set(n,o=[]),o.push(c)}}else i&&"function"==typeof i.exe&&i.exe(o),e.to&&e.to._exe(n.parent,o,r,e.type)}}function g(e,t,n="runtime"){e.comAry&&e.comAry.forEach(e=>{h(e,t,n)}),e.inputPins&&e.inputPins.forEach(e=>_(e,t,n)),e.outputPins&&e.outputPins.forEach(e=>_(e,t,n)),e.inputJoints&&e.inputJoints.forEach(e=>m(e,t,n)),e.outputJoints&&e.outputJoints.forEach(e=>m(e,t,n));const o=e,r={};o._update=function(o,i,u=c){const s=u+o.id,{curScope:f,coms:a}=r[s];e.comAry.forEach(e=>{a.push(e.runtime.id),"function"!=typeof e._exe&&(h(e,t,n),e._exe(f,u,void 0,void 0))})},o._exe=function(i,u,s=c,f,a){if(!i){if(e.parent){const t=l(e.parent?e.parent.runtime.id:e.id,e.id);t&&(i=t.parent)}i||(i=p(void 0,e.id+"-parent"))}const d=s+i.id;let _=!1;if(r[d]){const t=r[d].coms;(t.length!==e.comAry.length||e.comAry.find(e=>t.indexOf(e.runtime.id)<0))&&(_=!0)}if(!r[d]||_){let u,p;if(o._exeAsRoot_=!!a,s=void 0!==s?s:c,o._exeAsRoot_)u={inst:void 0,scopes:[]};else if(u=i.comInsts[e.parent.runtime.id],!u&&e._rootF)return;const l=[];"input"==(f="string"==typeof f?f:"input")&&(p=i.applyScope(!o._exeAsRoot_&&e.parent?e.parent.runtime.id:void 0,s,e.id,e._rootF),e.comAry.forEach(e=>{l.push(e.runtime.id),"function"!=typeof e._exe&&h(e,t,n),e._exe(p,s,void 0,void 0)})),r[d]={myInstScope:u,curScope:p,coms:l}}const{curScope:m}=r[d];if("input"==(f="string"==typeof f?f:"input")){const t={};if("mock"===n&&e.inputPins.length>0&&e.inputPins.forEach(e=>{e.mockData&&(t[e.hostId]=e.mockData)}),u=Object.assign(t,u))for(let t in u){const n=e.inputPins.find(e=>e.hostId==t);n?n._exe(m,u[t],void 0,void 0):"undefined"!=typeof console&&"function"==typeof console.error&&console.error(`No inputPin(id=${t}) found`)}return e.inputJoints&&e.inputJoints.forEach(e=>{!function(e,t){let n=t.parent,o=y.get(e);if(o){let e=o.get(n);e&&e.forEach(e=>{e(t)})}}(e,m)}),m}if(f.match(/^(output)|(inner-input)$/gi)){let t=m;if(e.outputPins.length){if(u)for(let e in u)t.returnParams[e]=u[e]||null;e.outputPins.find(e=>null==t.returnParams[e.hostId])||t.resolve()}}}}let b,v,x,E=null,w="stop";function O(){return"running"===w}let j={},P={};function I(e,t,n="runtime"){return function(e,t){if(!i(e,t))throw new Error("Invalid item type")}(e,o.FRAME),g(e,t,n),E={on(e,t){e&&"string"==typeof e&&"function"==typeof t&&(P[e.toLowerCase()]=t)},run(t=e,n){if("stop"===w&&(a={}),function(e){return Object.assign(j,e||{}),v=[],x=[],!0}(n))return function(){function e(e){try{e.exe&&e.exe()}catch(e){P.error?P.error(e):console.error(e)}t(b)}function t(n){if("stop"==w||n!==b)return;let o;"pause"==w&&setTimeout(t,1e3),x.length>0?o=x.shift():v.length>0&&(o=v.shift()),o?j.debug?setTimeout(()=>{e(o)},o.debugSleep):"number"==typeof o.sleep&&o.sleep>-1?setTimeout(()=>{e(o)},0):e(o):setTimeout(e=>t(n))}w="running",b=u(),t(b),new Promise((e,t)=>{})}(),e=>t._exe(void 0,e,void 0,"input",!0)},update:(t,n=e)=>(n._update(t,void 0,void 0),!0),pause:A,stop(){const e=(w="stop",!0);return E=null,v=void 0,x=void 0,a={},e}}}function A(){return w="pause",!0}function M(e,t){const n={_all:{},_waiting:{},set(e,t){this._all[e]=t;const n=this._waiting[e];if(n)try{n.forEach(e=>{t(e)}),delete this._waiting[e]}finally{}return!0},get(e){return this._all[e]},waiting(e,t){let n=this._waiting[e];n||(n=this._waiting[e]=[]),n.push(t)}},o=u(),i={};return{inputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.inputPins,e.inputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t,r)=>"__id__"===t?o:function(e){n.set(t,(function(n){const o=i[t];if(void 0!==n&&o){i[t]=void 0;const[o,r]=n;e(o,(function(e){"function"==typeof r&&r(e)}))}}))},set(e,o,r,u){i[o]=r;const c=n.get(o);return c?((null==t?void 0:t.input)&&t.input(),c(r)):n.waiting(o,r),!0}}),outputs:new Proxy({},{ownKeys(t){const n=[];return r.each(e=>{n.push(e.hostId)},e.outputPins,e.outputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,i,u){if("__id__"===i)return o;let c;return function(n,o){if(e.outputPins){c=o;const u=function(e){"function"==typeof c&&c(e)},s=r.find(({hostId:e})=>i==e,e.outputPins,e.outputPinsInModel);if(!s)throw new Error(`No output(hostId=${i}) found.`);Promise.resolve().then(()=>{(null==t?void 0:t.output)&&t.output(n),s._exe(null,n,u,e)})}}}})}}}])},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(module,exports,__webpack_require__){var t;window,t=function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__5__){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s}));const o="_ref_",r="_hc_",i="_from_",u="_merge_data_",c={},s={}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e,t,n){"use strict";(function(e){function o(e="u_"){return e+function(e,t){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];let r;for(t=t||n.length,r=0;r<8;r++)o[r]=n[0|Math.random()*t];return o.join("")}(0,16)}function r(e,t){let n;if("string"==typeof t){let e=t.lastIndexOf(".");n=-1!==e?t.substring(e+1):t}else n=e.name;return n.replaceAll(/[^\w]/gi,"_")}function i(e,t){let n=[];do{if(e==Object.prototype||e==Function.prototype)break;n=n.concat(Object.getOwnPropertyNames(e))}while(e=Object.getPrototypeOf(e));return n.filter(n=>{if(!t||t&&"function"!=typeof e[n])return"constructor"!=n&&!/^__.+/g.test(n)})}function u(e,t){let n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){let o=e;for(;void 0===n&&null!=(o=Object.getPrototypeOf(o))&&o!==Object.prototype;)n=Object.getOwnPropertyDescriptor(o,t)}return n}function c(e){return"symbol"==typeof e||function(e){return"object"==typeof e&&null!==e}(e)&&"[object Symbol]"===Object.prototype.toString.call(e)}function s(){let e,t=[];return{push(n,...o){t.find(e=>e.task===n)||t.push({task:n,args:o}),e||(e=1,Promise.resolve().then(()=>{e=void 0,t.forEach(({task:e,args:n},o)=>{e(...n),t[o]=void 0}),t=t.filter(e=>e)}))}}}function f(t,n){const o=window||e;let r;if(o){let e=o.__rxui__;void 0===e&&(e=o.__rxui__={}),r=e[t]?e[t]:e[t]=n}else r=n;return r}n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return f}))}).call(this,n(6))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));const o="_ignore_",r="_ignore_me_"},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"c",(function(){return SerializedReg})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Ignore})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Serializable})),__webpack_require__.d(__webpack_exports__,"d",(function(){return searchForMeta}));var _state_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3);const MetaKey="_rxui_meta_",SerializedReg=global._rxui_serializedReg_||(global._rxui_serializedReg_={});function Ignore(e,t){let n=Object.getOwnPropertyDescriptor(e,_constants__WEBPACK_IMPORTED_MODULE_2__.a);if(n)n.value[t]=!0;else{let n,o=Object.getPrototypeOf(e);for(;o&&o!==Object.prototype&&(n=Object.getOwnPropertyDescriptor(o,_constants__WEBPACK_IMPORTED_MODULE_2__.a),!n);)o=Object.getPrototypeOf(o);const r=Object.assign({},n&&n.value);Object.defineProperty(e,_constants__WEBPACK_IMPORTED_MODULE_2__.a,{value:r,writable:!0}),r[t]=!0}}function Serializable(e){if(1==arguments.length){const e=arguments[0];if("function"==typeof e)return hashcodeFn(e,e.name);if("string"==typeof e)return function(t){return hashcodeFn(t,e)};if("object"==typeof e&&"string"==typeof e.name){let{name:t,load:n}=e;return function(e){return hashcodeFn(e,t,n)}}throw new Error("@Serializable's param error.")}throw new Error("@Serializable should be used to decorate class only.")}function searchForMeta(e){let t;const n=e.constructor&&e.constructor[MetaKey],o=Object.getPrototypeOf(e),r=o&&searchForMeta(o);return r?(t=Object.assign({},n||{}),Object.keys(r).forEach(e=>{t[e]=n&&n[e]?Object.assign({},r[e],n[e]):Object.assign({},r[e])}),t):n}function hashcodeFn(fn,name,load){let fnName=Object(_util__WEBPACK_IMPORTED_MODULE_1__.b)(fn,name);const getUid=_util__WEBPACK_IMPORTED_MODULE_1__.g;let proxyFn=null,proto;return eval(`\n      proxyFn = function ${fnName}(){//Proxied and named\n        try{\n          const _this = new fn(...arguments)\n          \n          Object.defineProperty(_this, '${_state_common__WEBPACK_IMPORTED_MODULE_0__.b}', {\n              value:getUid('${fnName}_'),\n              writable: true,\n              enumerable:false\n          })\n\n          Object.setPrototypeOf(_this,proto)\n          return _this\n        }catch(ex){//not support ES6?\n          throw ex\n          \n          // var args = []\n          //\n          // for(var i=0;i<arguments.length;i++){\n          //   args.push(arguments[i])\n          // }\n          // fn.apply(this,args)\n          //\n          // Object.defineProperty(this, '${_state_common__WEBPACK_IMPORTED_MODULE_0__.b}', {\n          //     value:getUid('${fnName}_'),\n          //     writable: true,\n          //     enumerable:false\n          // })\n        }\n      }\n      proto = {\n        constructor:proxyFn\n      }\n      var statics = Object.getOwnPropertyNames(fn)\n      var regc = /^(length|name|prototype)$/gi\n      for(var i=0;i<statics.length;i++){\n        var nm = statics[i]\n        if(!nm.match(regc)){\n          proxyFn[nm] = fn[nm]\n        }\n      }\n      Object.setPrototypeOf(proto,fn.prototype)\n      proxyFn.prototype = proto\n  `),SerializedReg[name]={proto:proxyFn,load:load},setMeta(proxyFn,"serialized","name",name),proxyFn}function setMeta(e,t,n,o){const r=0==Object.getOwnPropertyNames(e).filter(e=>e==MetaKey).length?e[MetaKey]={}:e[MetaKey];(r[t]||(r[t]={}))[n]=o||e[n]}}).call(this,__webpack_require__(6))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"igonreObservableBefore",(function(){return ge})),n.d(t,"render",(function(){return y})),n.d(t,"useObservable",(function(){return Y})),n.d(t,"useComputed",(function(){return Z})),n.d(t,"useWatcher",(function(){return ee})),n.d(t,"useOnce",(function(){return te})),n.d(t,"observe",(function(){return ne})),n.d(t,"observable",(function(){return q})),n.d(t,"from",(function(){return ie})),n.d(t,"undo",(function(){return ae})),n.d(t,"redo",(function(){return pe})),n.d(t,"takeSnap",(function(){return _e})),n.d(t,"Serializable",(function(){return I.b})),n.d(t,"Ignore",(function(){return I.a})),n.d(t,"dump",(function(){return N})),n.d(t,"load",(function(){return M})),n.d(t,"recycle",(function(){return S})),n.d(t,"clone",(function(){return R})),n.d(t,"ignore",(function(){return k})),n.d(t,"dragable",(function(){return he})),n.d(t,"evt",(function(){return me})),n.d(t,"uuid",(function(){return c.g}));var o=n(1),r=n.n(o),i=n(5);const u=["onContextMenu","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onDrop","onDrag","onDragStart","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDragExit","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","onKeyPress","onKeyDown","onKeyUp","onCopy","onCut","onPaste","onChange","onInput","onSubmit","onFocus","onBlur","onScroll"];var c=n(2);const{ReactCurrentDispatcher:s}=r.a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Object(c.f)("CurrentNodeInfo",{});function a(e,t,n){if(!t||"function"!=typeof t._onError_&&"function"!=typeof t._onerror_){const o=t._parent_info_;if(o){const t=O.searchNode(o);if(t.props)return a(e,t.props,n)}throw n}return(t._onError_||t._onerror_)(n,e)}function p(e){const[t,n]=Object(o.useState)(0);return Object(o.useCallback)(e=>{n(e=>e+1)},[])}let l,d;function _(e,...t){if(l||(l=r.a.createElement,r.a.createElement=d=function(...e){let t;if(e.length>0&&"function"==typeof(t=e[0])){if(!(t.prototype instanceof r.a.Component)){const n=m(t);e.splice(0,1,n);const o=e[1]||{};try{Object.defineProperty(o,"_parent_info_",{value:r.a.createElement._cur_parent_info_,writable:!1,enumerable:!0,configurable:!1})}catch(e){console.info(`Object.defineProperty 'PARENT_NODE_INFO' error,in object ${o}.`)}e.splice(1,1,o)}return l(...e)}if("string"==typeof e[0]){const t=e[1];if(t){const e=r.a.createElement._render_in_node_info_;if(e){const n=e.id;u.forEach(e=>{let o=t[e];"function"==typeof o&&(t[e]=function(...e){let t;return O.curRT.setNodeInfoId(n),Object(i.unstable_batchedUpdates)(()=>{t=o(...e)}),O.curRT.clear(),t})})}}}return l(...e)}),t.length>0){let n=t[0];if(n){if("function"==typeof n){r.a.createElement=l;try{n=n()}catch(e){throw e}finally{r.a.createElement=d}}let o,i;if("object"==typeof n){if("function"!=typeof n.type)throw new Error("Invalid render type,expect HTMLTag | FunctionComponent | Function.");o=n.type,i=n.props}if(o){const e=m(o);t.splice(0,1,r.a.createElement(e,i))}}}return e.call(void 0,...t)}const h=function(...e){return _(i.render,...e)};h.test=function(e,t){return _(e,t)};var y=h;function m(e){const t="_observed_";let n=e[t];if(!n){n=function(e){function t(n,i){const u=O.getCurUpdater(),l=Object(o.useMemo)(()=>{const t={id:Object(c.g)(),component:e,name:e.name,parent:O.searchNode(n._parent_info_),props:n};return O.regNode(t),t},[]);f.current=l,r.a.createElement._cur_parent_info_=l.id,r.a.createElement._render_in_node_info_=l;const d={hoc:t,component:e,fiber:l,update:p()};Object(o.useEffect)(()=>()=>{O.cleanUpdater(d)},[]),O.setCurUpdater(d);const _=s.current;let h,y;if(_){const e=_.useMemo;if(h=_.useEffect,l){if(e&&!e._rxui_){const t=function(t,o){return e((function(...e){const o=O.getCurUpdater();let r;O.setCurUpdater(void 0);try{r=t(...e)}catch(e){a("useMemo",n,e)}finally{O.setCurUpdater(o)}return r}),o)};t._rxui_=!0,_.useMemo=t}if(h&&!h._rxui_){const e=function(e,t){return h((function(...t){let o;O.curRT.setNodeInfoId(l.id);try{o=e(...t)}catch(e){a("useEffect",n,e)}finally{O.curRT.clear()}return o}),t)};e._rxui_=!0,_.useEffect=e}}}try{y=e(n,i)}catch(e){y=a("render",n,e)}return null==y&&(y=r.a.createElement(r.a.Fragment)),h&&(_.useEffect=h),u&&O.setCurUpdater(u),f.current=void 0,r.a.createElement._render_in_node_info_=l.parent,y}return t.displayName=e.displayName||e.name,Object(o.memo)(t)}(e);try{e[t]=n}catch(e){}}const i=Object.getOwnPropertyNames(e);return i&&i.forEach(t=>{if(!/_observed_/.test(t))try{n[t]=e[t]}catch(e){console.error(e)}}),n}const g=Object(c.f)("nodes",{});let b,v,x=null,E=Object(c.f)("curUpdater",{cur:void 0});const w=Object(c.f)("batchStack",[]);var O;function j(e,t){return e&&t&&e.fiber.id===t.fiber.id&&e.hoc===t.hoc}!function(e){function t(e){return g[e]}e.curRT={setNodeInfoId(e){b=e},setInfoIdForDelay(){v=b},getNode(){const e=f.current;if(e)return g[e.id];if(b){const e=g[b];if(e)return e}return v?g[v]:void 0},clear(){b=null},clearDelay(){v=null}},e.regNode=function(e){const n={id:e.id,component:e.component,componentName:e.name,parent:null,children:[],subjectAry:[],observerAry:[]};if(g[n.id]=n,x){let o,r=e.parent;if(r){if(r.invalid)return;o=t(r.id),n.parent=o,o.children.push(n)}}else x=n},e.regListener=function(e,n){const o=f.current;if(!o)throw new Error("CurrentNodeInfo.current is undefined.");const r=t(o.id);return n&&r[e+"Ary"].push(n),r},e.getCurNode=function(){const e=f.current;if(!e)throw new Error("CurrentNodeInfo not found.");return t(e.id)},e.searchNode=t,e.setCurUpdater=function(e){E&&(E.cur=e)},e.getCurUpdater=function(){if(E)return E.cur},e.igonreObservableBefore=function(){E={}},e.cleanUpdater=function(e){const t=e.fiber.id,n=g[t];if(!n)throw new Error(`node[id=${t}] not found.`);n.parent&&(n.parent.children=n.parent.children.filter(e=>e.id!==t)),e.fiber.invalid=!0,g[t].invalid=!0,g[t]=null,delete g[t]},e.applyBatch=function(){const e=[];return w.push(e),{commit(){w.pop(),e.forEach(e=>{e&&e.fiber&&!e.fiber.invalid&&e.update(e)})},cancel(){w.pop()}}};const n=function(){let e,t=[];return{push(n){t.find(e=>j(e,n))||t.push(n),e||(e=1,Promise.resolve().then(()=>{e=void 0,t.forEach((e,n)=>{t[n]=void 0,e&&e.fiber&&!e.fiber.invalid&&e.update()}),t=t.filter(e=>e)}))}}}();e.applyAgent=function(){const t={};return{push(n,o){let r=t[o];r||(r=t[o]=[]);const i=e.getCurUpdater();if(i){let e;r.find((t,n)=>{if(j(t,i))return e=n,!0})?e>=0&&(r[e]=i):r.push(i)}},update(o,r,u){const c=o+"=>"+("function"==typeof u?"function":"object"==typeof u?"{..}":u),s=w[w.length-1];if(s){const e=t[r];e&&e.length>0&&e.forEach(e=>{s.find(t=>j(t,e))||(e.reason=`[${e.fiber.id}]${c}`,s.push(e))})}else{let o;(o=t[r])&&(Object(i.unstable_batchedUpdates)(()=>{t[r]=o.map(t=>{if(t&&t.fiber&&!t.fiber.invalid){t.reason=`[${t.fiber.id}]${c}`;const o=e.getCurUpdater();if(b&&o&&o===t)return;return o&&o.fiber.id!==t.fiber.id?b&&b===t.fiber.id?t.update(t):n.push(t):t.update(t),t}}).filter(e=>e)}),0===t[r].length&&(t[r]=void 0,delete t[r]))}}}}}(O||(O={}));var P=n(0),I=n(4),A=n(3);function M(e,t){if("object"!=typeof e)throw new Error("Invalid data format.");e=JSON.parse(JSON.stringify(e));const{refs:n,defs:o}={refs:{},defs:{}};for(let t in e){const r=e[t];if("object"!=typeof r||"object"!=typeof r.def||"object"!=typeof r.refs)throw new Error("Invalid data format.");const{def:i,refs:u,consts:c}=r;if(o[t]=i,u)for(const e in u)u[e].__consts__=c;Object.assign(n,u)}Object.keys(n).forEach(e=>{let t,o=n[e];if(void 0!==(t=o[P.a])){t=o.__consts__.froms[t],delete o.__consts__;const r=I.c[t];if(!r)return;if(!r||!r.proto)throw new Error("Invalid data format.");{const i=C(r.proto);i[P.a]=t,i[P.d]=o,n[e]=i}}});const r={refs:n,didMap:{}};function i(e,t){const n=T(r,e,t);return t?(Object.keys(n).forEach(e=>{let o=n[e];t[e]=o}),t):n}const u=O.applyBatch(),c={};return Object.keys(o).forEach(e=>{const n=o[e];if(t)c[e]=T(r,n);else{const t=P.f[e];void 0!==t?c[e]=i(n,t):P.e[e]=t=>{const o=O.applyBatch();c[e]=i(n,t),o.cancel()}}}),u.commit(),c}function T({refs:e,didMap:t},n,o){if(Array.isArray(n))return n.map(n=>T({refs:e,didMap:t},n));if("object"==typeof n&&n){if(n[P.b])return t[n[P.b]]=o||n,o||n;const r=n[P.c];if("string"==typeof r){if(!o&&t[r])return t[r];n=e[r],t[r]=o||n}let i,u;if(u=n[P.a]){if(delete n[P.a],i=I.c[u],!i)return;if(!i||!i.proto)throw new Error("Invalid data format.")}let s=n[P.d];if(void 0===s&&i&&(s=n,n=C(i.proto)),s){delete n[P.d];let o=Object(c.c)(s);if(o.length>0){const r=s[A.a];o.forEach(o=>{if(o===A.a)return;const u=Object(c.d)(n,o);if(!(u&&u.get&&!u.set||r&&r[o]||r&&r[o])){const r=T({refs:e,didMap:t},s[o]);try{let e;if(i&&"function"==typeof(e=i.load)){let t=e(n,o,r);void 0!==t&&(n[o]=t)}else n[o]=r}catch(e){throw e}}})}}else{let o=Object(c.c)(n);if(o.length>0){const r=n[A.a];o.forEach(o=>{if(o===A.a)return;const u=Object(c.d)(n,o);if(!(u&&u.get&&!u.set||r&&r[o]||r&&r[o])){r&&console.log(o);const u=T({refs:e,didMap:t},n[o]);try{let e;const t=Object(c.d)(n,o);if(t&&t.get&&!t.set)return;if(i&&"function"==typeof(e=i.load)){let t=e(n,o,u);void 0!==t&&(n[o]=t)}else n[o]=u}catch(e){throw e}}})}}}return n}function C(e){return new e}function N(...e){const t={},n=(e,t,n)=>n;return Object.keys(P.f).forEach(o=>{if(0==e.length||e.find(e=>e===o)){const e=function(e,t,n){let o={},r={},i={froms:[]};const u={consts:i,refs:o,def:function e(n){if("object"!=typeof n||!n)return n;if(D(n))return;if(n[P.b]){if(o[n[P.b]])return{[P.c]:n[P.b]};if(r[n[P.b]])return{[P.c]:n[P.b]}}let u={};if(Array.isArray(n)&&(u=[]),n[P.b]&&(r[n[P.b]]=!0),Array.isArray(n)){const o=[];Object.keys(n).forEach(r=>{try{if(r.match(/^__.+__$/g)||u[r])return}catch(e){}const i=n[r];D(i)?(o.push(r),u[r]=void 0):u[r]=e(t(n,r,i))}),o.length>0&&o.forEach(e=>u.splice(e,1))}else{let o=Object(c.c)(n);if(o.length>0){const r=n[A.a];o.forEach(o=>{if(o===A.a)return;const i=Object(c.d)(n,o);i&&i.get&&!i.set||r&&r[o]||"function"!=typeof n[o]&&(u[o]=e(t(n,o,n[o])))})}!0===n._observable_&&(u._observable_=!0);const r=Object(I.d)(n);let s;if(r&&(s=r.serialized)){i.froms.find(e=>e===s.name);let e=i.froms.indexOf(s.name);-1===e&&(i.froms.push(s.name),e=i.froms.length-1),u._from_=e}else if(n[P.b])throw new Error("Invalid data format.")}if(u[P.b]){const e=u[P.b];return o[e]=u,delete u[P.b],{[P.c]:e}}return u}(e)};return r=void 0,u}(P.f[o],n);t[o]=e}}),t}function D(e){return e&&"object"==typeof e&&e[A.b]}function F(e,t,n){var o;if(n&&"function"==typeof n){const e=Object(I.d)(t);if(!(null===(o=null==e?void 0:e.serialized)||void 0===o?void 0:o.name))throw new Error("No @Serializable({name:string}|string) decorator on "+n)}const r=P.e[e];void 0!==r&&r(t),P.f[e]=t}function S(e){if(!e[P.b])throw new Error(`Model must has ${P.b} property.`);let t=!1,n={},o=r=>{if("object"==typeof r&&null!==r){if(r[P.b]==e[P.b])return!0;if(n[r[P.b]])return;n[r[P.b]]=!0,Object(c.c)(r).forEach(e=>{const n=Object(c.d)(r,e);if(n&&n.get&&!n.set)return;let i=r[e];Array.isArray(i)?(i=i.map(e=>o(e)?void(t=!0):e),t&&(r[e]=i.filter(e=>void 0!==e))):o(i)&&(t=!0,r[e]=void 0)})}};return Object.keys(P.f).forEach(e=>{o(P.f[e])}),n=void 0,t}function R(e,t){let n=[];return function e(o){if("object"!=typeof(o=X(o))||!o)return o;for(let e=0;e<n.length;e++)if(n[e].target===o)return n[e].copyTarget;let r={};if(Array.isArray(o)&&(r=[]),n.push({target:o,copyTarget:r}),Array.isArray(o))Object.keys(o).forEach(t=>{/^__.+__$/g.test(t)||r[t]||(r[t]=e(o[t]))});else if(o instanceof RegExp);else{let n=Object(c.c)(o);if(n.length>0){let i=o[A.a];n.forEach(n=>{if(n!==P.b&&(t||!i||!i[n])){const t=Object(c.d)(o,n);t&&t.get?Object.defineProperty(r,n,{get:()=>e(o[n])}):r[n]=e(o[n])}})}}return r}(e)}function k(e){"object"==typeof e&&(e[A.b]=!0)}const $=/^before\@splice$/;let U;class L{constructor(e){this._undo={states:[],reg:new WeakMap},this._redo={states:[],reg:new WeakMap},this.listener=e}setUndo(e,t,n,o){this.sleeping||this.set(e,t,n,this._undo)&&this.listener&&(void 0!==o&&!0!==o||this.listener(e,t,n))}setRedo(e,t,n,o){this.sleeping||this.set(e,t,n,this._redo)&&this.listener&&(void 0!==o&&!0!==o||this.listener(e,t,n))}sleep(e){this.sleeping=!0;try{"function"==typeof e&&e()}catch(e){throw e}finally{this.sleeping=!1}}dump(){return U=null,this}undo(){U=null,this._undo.states.forEach(({obj:e,prop:t,val:n})=>{this.setRedo(e,t,B(t)?e:e[t],!1),this.setVal(e,t,n)})}redo(){U=null,this._redo.states.forEach(({obj:e,prop:t,val:n})=>{this.setUndo(e,t,B(t)?n:e[t],!1),this.setVal(e,t,n)})}cancel(){U=null}set(e,t,n,o){let r=o.reg.get(e);if(r||(r={},o.reg.set(e,r)),!(t in r)){if(r[t]=n,Array.isArray(e)&&B(t)){const n=[];e.forEach(e=>n.push(e)),o.states.push({obj:e,prop:t,val:n})}else o.states.push({obj:e,prop:t,val:n});return!0}}setVal(e,t,n){if(Array.isArray(e)){const o=e;B(t)?(o.splice(0,e.length),n.forEach(t=>{e.push(t)})):t.match(/^\d+$/)&&void 0===n?e.splice(parseInt(t),1):"length"!==t&&(e[t]=n)}else e[t]=n;this.listener&&this.listener(e,t,n)}}function B(e){return e.match($)}class W extends Error{}const J=new WeakMap,K=new WeakMap,z=Object(c.a)();function q(e,t=e,n,o){let r,i,u;"function"==typeof e&&(e=new e),"object"==typeof n&&(n.to||(r=n.expectTo),Array.isArray(n.ignore)&&(i=n.ignore),"function"==typeof n.watch&&(u=n.watch));const s=[];function f(e,t,n,o,r){u&&u(t,o,r);let i=e;do{const{source:e}=i,u=K.get(e);u&&u.forEach(({on:i,exe:u,node:c,target:s})=>{c.invalid||e!==X(s)||t.match(new RegExp(`.${i}$`))&&z.push(u,n,o,r)})}while(i=i.parent)}return function e(n,u,a=""){if(V(n))return n;if("object"==typeof n&&"_isVue"in n)return n;const p={},l={get(e,t,n){let o;if("function"==typeof t)[e]in p?o=p[e]:p[e]=o=n();else{if(V(t))return t;o=J.get(t),void 0===o&&J.set(t,o=n())}return o}},d={source:n,proxy:void 0,parent:u},_=O.applyAgent(),h=new Proxy(n,{has:(e,t)=>"__observable__"===t||"__original__"===t||t in e,get(f,p,h){if(f instanceof RegExp)return f[p];if("toString"===p||"toJSON"===p||"valueOf"===p||"$$typeof"===p||"constructor"===p||Object(c.e)(p))return f[p];if("__original__"===p)return"__original__"in f?f.__original__:f;if("__isExpectTo__"===p)return r;if("__pushWatch__"===p)return e=>{let t=K.get(n);t||K.set(n,t=new Set),t.has(e)||t.add(e)};if("__pushJoinFrom__"===p)return(e,t)=>{t.forEach(([t,n])=>{const o=t.split("."),r=n.split(".");let i,u=e,c=h;o.forEach((e,t)=>{u=u[e],t===o.length-1&&(i="object"==typeof u&&u?R(u):u)}),r.forEach((e,t)=>{if(t===r.length-1)c[e]=i;else if(c=c[e],!c)return!1})})};if("__pushJoinTo__"===p)return(e,t)=>{s.push({to:e,mapping:t})};const y=a+(p.match(/^\d+$/)?`[${p}]`:"."+p);let m;const g=Object(c.d)(f,p);if(m=g&&g.get?g.get.call(h):f[p],void 0===m&&r&&""===a)return(...e)=>{if(o)return function(e,t,n,o){if("parents"===n.direction){let r,i=n.node.parent;for(;i&&(!i.observerAry||!i.observerAry.find(n=>{if(n.type===e&&"children"===n.direction){try{r=n.proxy[t]}catch(e){if(!(e instanceof W))throw e}if(void 0!==r)return!0}}));)i=i.parent;if("function"==typeof r)return r(...o);throw new Error(`No implements found for(${t})`)}if("children"===n.direction){const r=[],i=n=>{n&&n.length>0&&n.forEach(n=>{n.observerAry&&n.observerAry.find(n=>{if(n.type===e){let e;try{e=n.proxy[t]}catch(e){if(!(e instanceof W))throw e}if(void 0!==e)return r.push(e),!0}})||i(n.children)})},u=n.node.children;if(i(u),r.length>0){let e=[];return r.forEach(t=>{e.push(t(...o))}),1==e.length?e[0]:e}throw new Error(`No implements found for(${t})`)}}(t,p,o(),e)};if("function"==typeof m){let e;return e=Array.isArray(f)?/^(splice)$/gi.test(p)?l.get(p,m,()=>(...e)=>{var t;if(U){const n=null===(t=a.match(/\.([^\.]+)$/))||void 0===t?void 0:t[1];let o=u.source[A.a];if(!o||!o[n]){let t;return U.setUndo(h,"before@splice",f),U.sleep(()=>{t=m.call(h,...e)}),t}return m.call(h,...e)}return m.call(h,...e)}):/^(indexOf)$/gi.test(p)?(...e)=>{const t=e.map(e=>X(e)),n=f.map(e=>X(e));return m.call(n,...t)}:m:l.get(p,m,()=>(...e)=>{try{return f instanceof Date||f instanceof Set||f instanceof Map?f[p].call(f,...e):f[p].call(h,...e)}catch(e){throw e}}),e}return _.push(y,p),i&&-1!==i.indexOf(p)?m:"object"==typeof m&&m&&!(m instanceof HTMLElement||m instanceof SVGElement||m instanceof RegExp||m.$$typeof)?l.get(p,m,()=>e(m,d,y)):m},set(e,t,n,o){var r;if("__proto__"===t)return e[t]=n,!0;const i=e[t];if(i!==n||Array.isArray(e)&&t&&"length"===t){const u=a+"."+t;if(U){let n=e[A.a];(!n||!n[t])&&U.setUndo(o,t,i)}const p=Object(c.d)(e,t);if(p&&p.set?p.set.call(o,n):e[t]=n,f(d,u,t,n,i),_.update(u,t,n),s.length>0&&s.find(({to:e,mapping:t})=>{if(!t.find(([t,o])=>{if("."+t===u){const t=o.split(".");let r=e;return t.forEach((e,o)=>{const i=t[o];o===t.length-1?r[i]=n:r=r[i]}),!0}})){const t=u.replace(/^\./,"").split(".");let o=e;t.forEach((e,r)=>{if("object"!=typeof o||!o)return!1;{const e=t[r];r===t.length-1?o[e]=n:o=o[e]}})}}),Array.isArray(e)&&t.match(/^(\d+)|length$/)){const t=null===(r=a.match(/\.([^\.]+)$/))||void 0===r?void 0:r[1];f(d,a,t,e,e)}}return!0}});return d.proxy=h,h}(e,null)}function X(e){return"object"==typeof e&&e&&e.__original__||e}function V(e){return"object"==typeof e&&e&&["__observable__"]in e}function H(e){V(e.target)&&e.target.__pushWatch__(e)}function Y(e,t,n,r,i){const u=[...arguments];n=u.find(e=>"object"==typeof e?e:void 0);const c=Object(o.useRef)(null);let s=!c.current;if(s){if(arguments.length<1)throw new Error("invalid arguments,expect <T>(class:new ()=>T|T).");if("object"!=typeof e&&"function"!=typeof e||!e)throw new Error("invalid arguments,expect <T>(class:new ()=>T|T).");let o;o="function"==typeof e?new e:e;let r=null;const i=q(o,e,n,()=>r);if("function"==typeof t&&t(e=>{if(e&&"object"==typeof e)return G(e,o),!0}),"object"==typeof n){if(n.to){const t=Q(e,i,n.to);t&&(r=t)}else if(n.expectTo){const t=Q(e,i,n.expectTo);t&&(r=t)}"function"==typeof n.init&&n.init(X(i))}Q(e,i,"self");const s=u.find(e=>"string"==typeof e?e:void 0);s&&F(s,i,e),c.current=i}i=u.find(e=>Array.isArray(e))||[];const f=[...i],a=Object(o.useCallback)(()=>{if(i&&!s){const o=c.current;if("function"!=typeof e)for(let t in e){const n=e[t];o[t]=n}else"function"==typeof t&&t(e=>{if(e&&"object"==typeof e){for(let t in e)o[t]=e[t];return!0}});"function"==typeof(null==n?void 0:n.init)&&n.init(X(o))}},f);return Object(o.useMemo)(a,f),c.current}function G(e,t){const n=Object.getOwnPropertyNames(e);n&&n.forEach(n=>{const o=e[n];"function"==typeof o?"constructor"!==n&&(t[n]=o):t[n]=o});const o=Object.getPrototypeOf(e);o&&o!==Object.prototype&&G(o,t)}function Q(e,t,n){if("string"!=typeof n||!/^(children|parents|self)$/gi.test(n))throw new Error("direction = 'children'|'parents' expect.");const o=new Proxy({},{get(e,n){let o=t[n];return"function"==typeof o?(...e)=>o(...e):o},set:(e,n,o)=>(t[n]=o,!0)}),r=O.regListener("subject",{type:e,direction:n,proxy:o});if(r&&"self"!==n)return{direction:n,node:r}}function Z(e){const[,t]=Object(o.useState)(),n=O.getCurUpdater(),r=Object(o.useMemo)(()=>({c:0,fn:e,updater:{_from_:"useComputed",component:n.component,hoc:e,fiber:f.current,update:function(){t(r.c++)}}}),[]);return Object(o.useMemo)(()=>{const t=r.updater;let o;O.setCurUpdater(t);try{o=e()}catch(e){if(!t.fiber||!t.fiber.props)throw e;!function e(t,n,o){if(!n||"function"!=typeof n._onError_&&"function"!=typeof n._onerror_){const r=n._parent_info_;if(r){const n=O.searchNode(r);if(n.props)return e(t,n.props,o)}throw o}return(n._onError_||n._onerror_)(o,t)}("render",t.fiber.props,e)}finally{O.setCurUpdater(n)}return o},[r.c])}function ee(e,t,n){Object(o.useMemo)(()=>{const o="useWatcher(target:Observable,on:string,callback:(prop: string, value: any, preValue?: any) => void).";if(!V(e))return;if("string"!=typeof t)throw new Error(o);if("function"!=typeof n)throw new Error(o);const r=O.regListener("observer");H({target:e,on:t,exe:n,node:r})},[])}function te(e,t){const n=Object(o.useRef)();return Object(o.useMemo)(()=>(n.current||(n.current=e()),n.current),t)}function ne(e,t,n,r){const i=[...arguments];let u;if(n=i.find(e=>"object"==typeof e),r=i.find(e=>Array.isArray(e)),n&&(n.from||(null==n?void 0:n.expectTo)))u=Object(o.useRef)();else if(u={},r)throw new Error("Updater can not be used here.");let c=!u.current;if(void 0===u||!u.current){if(arguments.length<0)throw new Error("invalid arguments,expect <T>(class:new ()=>T).");if("function"!=typeof e||!e)throw new Error("invalid arguments,expect <T>(class:new ()=>T).");const o={watcherPushed:{}};if("function"==typeof t){const e=t(e=>{if(e&&"object"==typeof e)return o.implVal=e,!0});"object"==typeof e&&(o.implVal=e)}function s(t,o){let r;try{r=oe("observer",e,n.expectTo,i,t)}catch(e){if(!o)throw e;r=[]}if(!Array.isArray(r)){if("function"!=typeof r)throw new Error("ExpectTo's value must be a Function type.");r=[r]}return(...e)=>{o&&r.push(o);let t=[];return r.forEach(n=>{t.push(n(...e))}),1==t.length?t[0]:t}}const r=new Proxy({},{get(t,r){if("toString"===r||"valueOf"===r||"$$typeof"===r||"constructor"===r||r===Symbol.toPrimitive||r===Symbol.toStringTag||r===Symbol.iterator)return t[r];if(o.implVal){let e=o.implVal[r];if(void 0!==e){if(null==n?void 0:n.expectTo){if("function"!=typeof e)throw new Error("ExpectTo's value must be a Function type.");return s(r,e)}return e}}if(null==n?void 0:n.expectTo)return s(r);if(null==n?void 0:n.from){const t=oe("subject",e,null==n?void 0:n.from,i,r);let u;if(!o.watcherPushed[r]&&V(t)&&"object"==typeof n.watch&&(u=n.watch)){o.watcherPushed[r]=!0;const e=new RegExp(`^${r}.(.+)$`);u.on.match(e)&&H({target:t,on:u.on.replace(e,"$1"),exe:u.exe,node:i})}if(!o.implVal)return t}else{const t=O.curRT.getNode();if(t&&t.subjectAry){let n;return t.subjectAry.find(t=>{if("self"===t.direction&&t.type===e)return n=t.proxy[r],!0}),n}}},set(t,o,r){let u=i,c=null==n?void 0:n.from;return c||(c="self",u=O.curRT.getNode()),u&&re("subject",e,c,u,o,r),!0}});let i;n&&n.from&&(i=O.regListener("observer",{type:e,direction:n.from,proxy:r}),O.regListener("subject",{type:e,direction:"self",proxy:r})),o.proxy=r,u.current=o}if(r){const e=[...r],n=Object(o.useCallback)(()=>{if(r&&!c){const e=u.current.implVal;"function"==typeof t&&t(t=>{if(t&&"object"==typeof t){for(let n in t)e[n]=t[n];return!0}})}},e);Object(o.useEffect)(n,e)}return u.current.proxy}function oe(e,t,n,o,r){if(e+="Ary","parents"===n){let i,u=o.parent;for(;u&&(!u[e]||!u[e].find(e=>{if(e.direction!==n&&"self"!==e.direction&&e.type===t)return i=e.proxy,!0}));)u=u.parent;if(void 0!==i)return i[r]}else if("children"===n){const i=[],u=o=>{o&&o.length>0&&o.forEach(o=>{o[e]&&o[e].find(e=>{if(e.direction!==n&&"self"!==e.direction&&e.type===t){let t;try{t=e.proxy[r]}catch(e){if(!(e instanceof W))throw e}if(void 0!==t)return i.push(t),!0}})||u(o.children)})},c=o.children;if(u(c),i.length>0)return i;throw new Error(`No implements found for(${r})`)}}function re(e,t,n,o,r,i){if(e+="Ary","parents"===n){let n=o.parent;for(;n&&(!n[e]||!n[e].find(e=>{if(e.type===t)return e.proxy[r]=i}));)n=n.parent}else if("children"===n){const n=o=>{o&&o.length>0&&o.forEach(o=>{o[e]&&o[e].find(e=>{if(e.type===t)return e.proxy[r]=i,!0})||n(o.children)})},u=o.children;n(u)}else"self"===n&&o.subjectAry&&o.subjectAry.find(e=>{if("self"===e.direction&&e.type===t)return e.proxy[r]=i,!0})}function ie(e,t){if(!V(e))throw new Error("The join to object must be an observable object.");if(V(n=e)&&n.__isExpectTo__)throw new Error("The observable object has expectTo,join is not allowed.");var n;return{joinTo(n,o){if("object"==typeof n){if(!V(n))throw new Error("The join from object must be an observable object.");if((null==t?void 0:t.length)!==(null==o?void 0:o.length))throw new Error("The mapping props(in from and to) must be a same length.");let r=[];(null==t?void 0:t.length)>0?null==t||t.forEach((e,t)=>{r.push([e,o[t]])}):Object(c.c)(e).forEach(e=>{r.push([e,e])}),function(e,t,n){e.__pushJoinTo__(t,n)}(e,n,r),function(e,t,n){e.__pushJoinFrom__(t,n)}(n,e,r)}}}}let ue;const ce={push(e){se.push(e),this.handler.size+=1},handler:q({name:"Undo",size:(se=[{}]).length,exe(){if(se.length<=1)return;const e=se.pop();e.undo(),ce.handler.size-=1,fe.push(e)}})};var se;const fe=(e=>({push(t){e.push(t),this.handler.size+=1},handler:q({name:"Redo",size:e.length,exe(){if(e.length<=1)return;const t=e.pop();t.redo(),fe.handler.size-=1,ce.push(t)}})}))([{}]),ae=ce.handler,pe=fe.handler;let le;function de(e){setTimeout(e=>{if(le){const e=le.until-((new Date).getTime()-le.from);e<=0?(ce.push(le.dump),le=void 0):de(e)}},e)}function _e(e,t){if(le)if(ue!==e)ce.push(le.dump),le=void 0,ue=void 0;else{if(!(le.until>0&&(new Date).getTime()-le.from>le.until))return{on(e){},wait(){},commit(e){if(le.until<0)e&&e.wait?(le.from=(new Date).getTime(),de(le.until)):(ce.push(le.dump),le=void 0);else{let t=le.until-((new Date).getTime()-le.from);if(t<=0)return ce.push(le.dump),void(le=void 0);e&&e.wait&&(le.from=(new Date).getTime(),t=le.until),de(t)}},cancel(){ue=void 0,n.undo()}};ce.push(le.dump),le=void 0}ue=e;let n=function(e){return U=new L(e),U}(t);return{on(e){},wait(){if(!le){const e=n.dump();le={from:(new Date).getTime(),until:-1,dump:e}}},commit(e){const t=n.dump();e&&e.wait?le={from:(new Date).getTime(),until:e.wait,dump:t}:(ue=void 0,ce.push(t))},cancel(){ue=void 0,n.undo()}}}const he=function(e,t,n){const o=e.currentTarget,r=o.offsetWidth,i=o.offsetHeight,u=3==arguments.length&&n&&n.relDom,c=(3==arguments.length&&n&&n.zoom,ye(o,u)),s=u?ye(u):{x:0,y:0};let f,a,p,l,d,_=e.pageX-c.x,h=e.pageY-c.y;if(!t)return c;{O.curRT.setInfoIdForDelay();const e=e=>{let n=e.pageX-_-f||0,u=e.pageY-h-a||0;f=e.pageX-_,a=e.pageY-h,p=e.pageX-s.x,l=e.pageY-s.y,0==n&&0==u||(d=d?"moving":"start",t({po:{x:f,y:a},epo:{ex:p,ey:l},dpo:{dx:n,dy:u},targetStyle:{x:c.x,y:c.y,w:r,h:i}},d,o))};let n=!1;document.onmousemove=t=>{n||(n=!0,he.event=t),e(t)},document.onmouseup=n=>{setTimeout(()=>he.event=void 0);try{const u=O.applyBatch();e(n),d&&t({po:{x:f,y:a},epo:{ex:p,ey:l},dpo:{dx:0,dy:0},targetStyle:{x:c.x,y:c.y,w:r,h:i}},"finish",o),u.commit()}catch(e){throw e}finally{document.onmousemove=null,document.onmouseup=null,O.curRT.clearDelay()}}}};function ye(e,t){if(t){let n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{x:n.left-o.left,y:n.top-o.top,w:e.offsetWidth,h:e.offsetHeight}}{let t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:e.offsetWidth,h:e.offsetHeight}}}function me(e){function t(t){e&&e(t)}return t.stop=function(e){e.stopPropagation(),t(e)},t.prevent=function(e){e.preventDefault(),t(e)},t.stop.prevent=function(e){e.preventDefault(),t.stop(e)},t}const ge=O.igonreObservableBefore}])},module.exports=t(__webpack_require__(2),__webpack_require__(4))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(e,t,n){"use strict";var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),u=[];function c(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],f=n[s]||0,a="".concat(s," ").concat(f);n[s]=f+1;var p=c(a),l={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(u[p].references++,u[p].updater(l)):u.push({identifier:a,updater:y(l,t),references:1}),o.push(a)}return o}function f(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var u=i(e.insert||"head");if(!u)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");u.appendChild(t)}return t}var a,p=(a=[],function(e,t){return a[e]=t,a.filter(Boolean).join("\n")});function l(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=p(t,r);else{var i=document.createTextNode(r),u=e.childNodes;u[t]&&e.removeChild(u[t]),u.length?e.insertBefore(i,u[t]):e.appendChild(i)}}function d(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var _=null,h=0;function y(e,t){var n,o,r;if(t.singleton){var i=h++;n=_||(_=f(t)),o=l.bind(null,n,i,!1),r=l.bind(null,n,i,!0)}else n=f(t),o=d.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=c(n[o]);u[r].references--}for(var i=s(e,t),f=0;f<n.length;f++){var a=c(n[f]);0===u[a].references&&(u[a].updater(),u.splice(a,1))}n=i}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,".slot-78f44 {\n  width: 100%;\n  height: 100% !important;\n  position: relative !important;\n}\n.lyFlexColumn-bc992 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-40836 {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.justifyContentFlexStart-6e8c3 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-1b2b7 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-bb109 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-bc67b {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-2463c {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-297e8 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-74c2d {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-86a8e {\n  align-items: flex-end;\n}\n.debugFocus-417fb {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n",""]),t.locals={slot:"slot-78f44",lyFlexColumn:"lyFlexColumn-bc992",lyFlexRow:"lyFlexRow-40836",justifyContentFlexStart:"justifyContentFlexStart-6e8c3",justifyContentFlexCenter:"justifyContentFlexCenter-1b2b7",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-bb109",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-bc67b",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-2463c",alignItemsFlexStart:"alignItemsFlexStart-297e8",alignItemsFlexCenter:"alignItemsFlexCenter-74c2d",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-86a8e",debugFocus:"debugFocus-417fb"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(u=o,c=btoa(unescape(encodeURIComponent(JSON.stringify(u)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),i=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([r]).join("\n")}var u,c,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var u=this[i][0];null!=u&&(r[u]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"parse",(function(){return c})),n.d(t,"RenderReact",(function(){return _}));var o=n(1);let r,i,u;function c(e){u=new WeakMap,i={};const t=e["xg.desn.stageview"],{def:n,refs:c}=t;r=c;const f=[],a=s(n._ref_).mainModule;if(a.frame){!function e(t){t.comAry&&t.comAry.forEach(t=>{if(Object(o.isTypeof)(t,o.E_ItemType.NODE)){const{runtime:n}=t,o=n.def.namespace+"@"+n.def.version;f.indexOf(o)<=0&&f.push(o),t.frames&&t.frames.forEach(t=>e(t))}})}(a.frame)}return r=void 0,i=void 0,u=void 0,{mainModule:a,requireComs:f}}function s(e){let t=i[e];return t||(i[e]=t=r[e],function e(t){if(t&&u.has(t))return u.get(t);if("object"==typeof t&&t){let n;return t._ref_?(n=s(t._ref_),u.set(t,n)):(u.set(t,t),Object.keys(t).forEach(n=>{let o=t[n];Array.isArray(o)?o.forEach((t,n)=>{o[n]=e(t)}):t[n]=e(o)}),n=t),n}return t}(t),t)}var f=n(2),a=n(3),p=n(0),l=n.n(p);const d={};function _({mainModule:e,comDefs:t,inputParams:n,output:r,env:i,runtimeCfg:u,logs:c,logger:s}){const p=Object.assign({},t),{frame:l,slot:_}=Object(f.useMemo)(()=>{const{frame:t,slot:r}=Object(a.observable)(e);return Object(o.compile)(t,{node:e=>({render(t,n,r,c){const f=Object(o.createIO)(e,{output(){}});d[e.runtime.id]={scopePath:t,frameLable:n,frames:r,io:f};const l=e.runtime.def,_=l.rtType;if(_&&_.match(/js/gi)){const t=Object.assign({get curModule(){if(e.parent.parent){const t=e.parent.outputPins,n={};return t.forEach(e=>{n[e.id]=(t,n)=>{e._exe(c,t,n)}}),{outputs:n}}}},u),n=l.namespace+"@"+l.version,o=p[n];if(!o||"function"!=typeof o)throw new Error(`未找到组件(${n})`);o({data:Object(a.clone)(e.runtime.model.data),inputs:f.inputs,outputs:f.outputs,env:Object.assign({runtime:t},i||{}),logger:s(e.runtime)})}return f}}),pin(e){const t=e.parent.runtime?e.parent.runtime:void 0;return{exe(n){e.type.match(/^ext$/gi)&&e.direction.match(/^input|inner-output$/gi)&&("show"===e.hostId?e.parent.runtime.model.style.display="block":"hide"===e.hostId&&(e.parent.runtime.model.style.display="none"));const o="object"==typeof n&&n?JSON.stringify(n):String(n);t&&c&&"function"==typeof c.info&&setTimeout(n=>{c.info({catelog:"程序运行",content:`${t.title} | ${e.title} ${"input"==e.direction||"inner-input"==e.direction?"传入":"传出"} ${o}`,focus(){t._focus=!0},blur(){t._focus=void 0}})})}}}}).run()(n?{params:n}:void 0),{frame:t,slot:r}},[]),y=[];return _.comAry.forEach(e=>{y.push(React.createElement(h,{key:e.runtime.id,node:e,comDefs:p,env:i,runtimeCfg:u,logger:s}))}),y}function h({node:e,comDefs:t,env:n,runtimeCfg:o,logger:r}){const{slots:i,runtime:u,parent:c}=e,s=u.def.rtType;if(s&&s.match(/js/gi))return;const f=u.model,a=t[u.def.namespace+"@"+u.def.version],p=d[u.id].io,_={};i&&i.forEach(e=>{_[e.id]={id:e.id,title:e.title,render(){const{frames:i}=d[u.id],c=i[e.id];"function"==typeof c&&c();const s=e.comAry;return React.createElement("section",{className:y(e)},s.map(e=>React.createElement(h,{key:e.runtime.id,node:e,comDefs:t,env:n,runtimeCfg:o,logger:r})))}}});const m=f.style;let g={};"absolute"===c.style.layout&&(g.position="absolute",g.width="fit-content",g.top=m.top+"px",g.left=m.left+"px");const b=Object.assign({runtime:o||{}},n||{});return React.createElement("div",{id:e.runtime.id,style:Object.assign({width:m.width||"100%",display:m.display,paddingTop:m.marginTop+"px",paddingBottom:m.marginBottom+"px",paddingLeft:m.marginLeft+"px",paddingRight:m.marginRight+"px"},g),className:""+(e.runtime._focus?l.a.debugFocus:"")},a({slots:_,env:b,data:f.data,style:m,inputs:p.inputs,outputs:p.outputs,logger:r(e.runtime)}))}function y(e){var t,n;const o=[l.a.slot],r=e.style;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(l.a.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(l.a.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(l.a.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(l.a.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(l.a.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(l.a.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(l.a.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?o.push(l.a.alignItemsFlexStart):"CENTER"===i.toUpperCase()?o.push(l.a.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&o.push(l.a.alignItemsFlexFlexEnd))}return o.join(" ")}}])}));